!function(){"use strict";function n(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function l(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach(function(e){var n,t,r;n=o,r=i[t=e],t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return r(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return r(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function t(s){var n=s.dataSets[0].series,e=s.structure.attributes.observation,c=s.structure.dimensions.observation[0],l=e.map(function(e,n){return[n,e]}).filter(function(e){return"OBS_STATUS"===u(e,2)[1].id})[0],f=s.structure.dimensions.series,d={};Object.keys(n).forEach(function(a){var u=n[a];Object.keys(u.observations).forEach(function(e){var n,t,r=u.observations[e],o=null===r[0],i=(n=r,l?l[1].values[n[l[0]+1]]:{A:"Normal value"});o||-1===p.indexOf(i.id)?(!o&&v&&console.log(s.structure.links[0].href.split("/").slice(-2,-1).concat((t=a.split(":"),f.map(function(e,n){return e.values[t[n]]}).map(function(e){return e.id}))).join("."),"removed ".concat(i.id," (").concat(i.name,")"),c.values[e].name),delete u.observations[e]):d[e]=!0}),0===Object.keys(u.observations).length&&delete n[a]});for(var t=c.values,r=[],o=!1,i=0,a=0;i<t.length;i++)d[i]&&(r.push([i,a]),i!==a&&(o=!0),a++);return c.values=t.filter(function(e,n){return d[n]}),o&&Object.keys(n).forEach(function(e){var o=n[e],i={};r.forEach(function(e){var n=u(e,2),t=n[0],r=n[1];t in o.observations&&(i[r]=o.observations[t])}),o.observations=i}),s}function b(n,e){var t=["lastNObservations","startPeriod"].filter(function(e){return e in n});return e?e+"/"+n.code.replace(".","/")+encodeURIComponent((t.length?"?":"")+t.map(function(e){return"".concat(e,"=").concat(n[e])}).join("&")):"https://sdw-wsrest.ecb.europa.eu/service/data/"+n.code.replace(".","/")+(t.length?"?":"")+t.map(function(e){return"".concat(e,"=").concat(encodeURIComponent(n[e]))}).join("&")}function o(m){return function(n){function s(e){return!m.singleTimePeriod||e.name===o}var e=b(m),t=m.description,c=n.structure.links[0].href.split("/")[6],l=n.structure.dimensions.observation[0].values,f=n.structure.dimensions.series,r=n.structure.attributes.series,o=l.map(function(e){return e.name}).sort().reverse()[0],i="";r.forEach(function(e){!e.values.length||"TITLE_COMPL"!==e.id&&"COMMENT_TS"!==e.id||(i=e.values[0].name)}),i&&(f.forEach(function(e){1<e.values.length&&(i=i.replace(e.values[0].name,""))}),i=(i=(i=i.replace(/- *[,-]/g,"-")).replace(/, *,/g,",")).replace(/^ *, */g,"")),m.methodology&&(i=m.methodology);function a(e){var o=n.dataSets[0].series[e],r=e.split(":"),i=[],a=[c];f.forEach(function(e,n){var t=e.values[r[n]];a.push(t.id),1<e.values.length&&i.push(t.name)}),i.unshift(a.join("."));var u=!1;l.forEach(function(e,n){if(s(e)){var t=o.observations[n],r=void 0!==t?t[0]:null;null!==r&&(u=!0),i.push(r)}}),u&&d.push(i)}var u=["Statistical Data Warehouse code"].concat(f.filter(function(e){return 1<e.values.length}).map(function(e){return e.name})).concat(l.filter(s).map(function(e){return e.name})),d=[u];for(var v in n.dataSets[0].series)a(v);var p=[[t],[i],["URL: ".concat(e)],[]],h=XLSX.utils.aoa_to_sheet(p.concat(d));return h["!merges"]=[{s:{r:0,c:0},e:{r:0,c:10}},{s:{r:1,c:0},e:{r:1,c:10}},{s:{r:2,c:0},e:{r:2,c:10}}],h["!cols"]=u.map(function(e,n){var t=e.length;return d.forEach(function(e){e[n]&&e[n].length>t&&(t=e[n].length)}),{width:t+1}}),h}}var v="undefined"!=typeof window&&/debug/.test(window.location.hash),p=["A","P","U"],i={},a=[["010000","011000"],["010000","012000"],["011000","011100"],["011000","011200"],["011000","011300"],["011000","011400"],["011000","011500"],["011000","011600"],["011000","011700"],["011000","011800"],["011000","011900"],["011100","011110"],["011100","011120"],["011100","011130"],["011100","011140"],["011100","011150"],["011100","011160"],["011100","011170"],["011100","011180"],["011200","011210"],["011200","011220"],["011200","011230"],["011200","011240"],["011200","011250"],["011200","011260"],["011200","011270"],["011200","011280"],["011300","011310"],["011300","011320"],["011300","011330"],["011300","011340"],["011300","011350"],["011300","011360"],["011400","011410"],["011400","011420"],["011400","011430"],["011400","011440"],["011400","011450"],["011400","011460"],["011400","011470"],["011500","011510"],["011500","011520"],["011500","011530"],["011500","011540"],["011500","011550"],["011600","011610"],["011600","011620"],["011600","011630"],["011600","011640"],["011700","011710"],["011700","011720"],["011700","011730"],["011700","011740"],["011700","011750"],["011700","011760"],["011800","011810"],["011800","011820"],["011800","011830"],["011800","011840"],["011800","011850"],["011800","011860"],["011900","011910"],["011900","011920"],["011900","011930"],["011900","011940"],["011900","011990"],["012000","012110"],["012000","012120"],["012000","012130"],["012000","012210"],["012000","012220"],["012000","012230"],["020000","021110"],["020000","021120"],["020000","021210"],["020000","021220"],["020000","021230"],["020000","021240"],["020000","021310"],["020000","021320"],["020000","021330"],["020000","021340"],["020000","022010"],["020000","022020"],["020000","022030"],["030000","031100"],["030000","031210"],["030000","031220"],["030000","031230"],["030000","031310"],["030000","031320"],["030000","031410"],["030000","031420"],["030000","032110"],["030000","032120"],["030000","032130"],["030000","032200"],["040000","041000"],["040000","043000"],["040000","044000"],["040000","045000"],["041000","041100"],["041000","041210"],["041000","041220"],["043000","043100"],["043000","043210"],["043000","043220"],["043000","043230"],["043000","043240"],["043000","043250"],["043000","043290"],["044000","044100"],["044000","044200"],["044000","044300"],["044000","044410"],["044000","044420"],["044000","044490"],["045000","045100"],["045000","045210"],["045000","045220"],["045000","045300"],["045000","045410"],["045000","045490"],["045000","045500"],["050000","051000"],["050000","052000"],["050000","053000"],["050000","054000"],["050000","055000"],["050000","056000"],["051000","051110"],["051000","051120"],["051000","051130"],["051000","051190"],["051000","051210"],["051000","051220"],["051000","051230"],["051000","051300"],["052000","052010"],["052000","052020"],["052000","052030"],["052000","052040"],["052000","052090"],["053000","053110"],["053000","053120"],["053000","053130"],["053000","053140"],["053000","053150"],["053000","053190"],["053000","053210"],["053000","053220"],["053000","053230"],["053000","053240"],["053000","053290"],["053000","053300"],["054000","054010"],["054000","054020"],["054000","054030"],["054000","054040"],["055000","055110"],["055000","055120"],["055000","055210"],["055000","055220"],["055000","055230"],["056000","056110"],["056000","056120"],["056000","056210"],["056000","056220"],["056000","056230"],["056000","056290"],["060000","061100"],["060000","061210"],["060000","061290"],["060000","061310"],["060000","061320"],["060000","061330"],["060000","061390"],["060000","062110"],["060000","062120"],["060000","062200"],["060000","062310"],["060000","062320"],["060000","062390"],["060000","063000"],["070000","071000"],["070000","072000"],["070000","073000"],["071000","071110"],["071000","071120"],["071000","071200"],["071000","071300"],["071000","071400"],["072000","072110"],["072000","072120"],["072000","072130"],["072000","072210"],["072000","072220"],["072000","072230"],["072000","072240"],["072000","072300"],["072000","072410"],["072000","072420"],["072000","072430"],["073000","073110"],["073000","073120"],["073000","073210"],["073000","073220"],["073000","073310"],["073000","073320"],["073000","073410"],["073000","073420"],["073000","073500"],["073000","073610"],["073000","073620"],["073000","073690"],["080000","081010"],["080000","081090"],["080000","082010"],["080000","082020"],["080000","082030"],["080000","082040"],["080000","083010"],["080000","083020"],["080000","083030"],["080000","083040"],["080000","083050"],["090000","091000"],["090000","092000"],["090000","093000"],["090000","094000"],["090000","095000"],["090000","096000"],["091000","091110"],["091000","091120"],["091000","091130"],["091000","091190"],["091000","091210"],["091000","091220"],["091000","091230"],["091000","091310"],["091000","091320"],["091000","091330"],["091000","091340"],["091000","091410"],["091000","091420"],["091000","091490"],["091000","091500"],["092000","092110"],["092000","092120"],["092000","092130"],["092000","092140"],["092000","092150"],["092000","092210"],["092000","092220"],["092000","092300"],["093000","093110"],["093000","093120"],["093000","093210"],["093000","093220"],["093000","093230"],["093000","093310"],["093000","093320"],["093000","093410"],["093000","093420"],["093000","093500"],["094000","094110"],["094000","094120"],["094000","094210"],["094000","094220"],["094000","094230"],["094000","094240"],["094000","094250"],["094000","094290"],["095000","095110"],["095000","095120"],["095000","095130"],["095000","095140"],["095000","095210"],["095000","095220"],["095000","095300"],["095000","095410"],["095000","095490"],["096000","096010"],["096000","096020"],["100000","101010"],["100000","101020"],["100000","102000"],["100000","103000"],["100000","104000"],["100000","105000"],["110000","111110"],["110000","111120"],["110000","111200"],["110000","112010"],["110000","112020"],["110000","112030"],["120000","121000"],["120000","123000"],["120000","124000"],["120000","125000"],["120000","126000"],["120000","127000"],["121000","121110"],["121000","121120"],["121000","121130"],["121000","121210"],["121000","121220"],["121000","121310"],["121000","121320"],["123000","123110"],["123000","123120"],["123000","123130"],["123000","123210"],["123000","123220"],["123000","123230"],["123000","123290"],["124000","124010"],["124000","124020"],["124000","124030"],["124000","124040"],["125000","125200"],["125000","125320"],["125000","125410"],["125000","125420"],["125000","125500"],["126000","126210"],["126000","126220"],["127000","127010"],["127000","127020"],["127000","127030"],["127000","127040"],[null,"010000"],[null,"020000"],[null,"030000"],[null,"040000"],[null,"050000"],[null,"060000"],[null,"070000"],[null,"080000"],[null,"090000"],[null,"100000"],[null,"110000"],[null,"120000"]],f=[];!function r(o){return function(n){var e=a.filter(function(e){return u(e,1)[0]===n}).map(function(e){return u(e,2)[1]}).sort();if(e.length){var t=f.length;f.push({code:"ICP.A.AT+BE+CY+DE+EE+ES+FI+FR+GR+IE+IT+LT+LU+LV+MT+NL+PT+SI+SK+U2.N.".concat(e.join("+"),".4.INW"),lastNObservations:2,description:"Indices of consumer prices",methodology:"Percentage shares",drilldown:{}}),null!==n&&(f[o].drilldown[n]=t),e.forEach(r(t))}}}(-1)(null);var s,d=(s="../../data",function(e){var r=b(e,s);return r in i||(i[r]=new Promise(function(e,n){var t=new XMLHttpRequest;t.addEventListener("load",function(){200<=this.status&&this.status<400?e(JSON.parse(this.responseText)):n(this.status+" "+this.statusText)}),t.open("GET",r),t.setRequestHeader("Accept","application/json"),t.send()}).then(function(e){return t(e)})),i[r]});f.map(function(e){return b(e)});window.fetchDataSet=function(e){return d(f[e]).then((c=e,function(n){var r={REF_AREA:"geo",TIME_PERIOD:"time",ICP_ITEM:"coicop"},o={U2:"EA",GB:"UK",GR:"EL"},t=[],i=n.structure.dimensions.series.concat(n.structure.dimensions.observation).map(function(e){var n=t.indexOf(e.id)<0?e.values:[e.values[0]];return l(l({},e),{},{values:n})}),a=i.map(function(e){return e.values.length});a.shift();var e=i.filter(function(e){return e.id in r||1!=e.values.length}).map(function(e){var n=e.id in r?r[e.id]:e.id,t="geo"===n?e.values.map(function(e){var n=e.id in o?o[e.id]:e.id;return l(l({},e),{},{id:n})}):e.values;return l(l({},e),{},{id:n,values:t})}),u={};Object.keys(n.dataSets[0].series).forEach(function(e){var r=n.dataSets[0].series[e],o=0;e.split(":").forEach(function(e,n){t.indexOf(i[n].id)<0&&(o+=parseInt(e)),o*=a[n]}),Object.keys(r.observations).forEach(function(e){var n=r.observations[e][0];n=parseFloat(n.toFixed(2));var t=o+parseInt(e);t in u&&console.error("duplicate value in position: ".concat(t)),u[t]=n})});var s={};return e.forEach(function(t){s[t.id]={category:{index:{}}},t.values.forEach(function(e,n){s[t.id].category.index[e.id]=n})}),{class:"dataset",value:u,dimension:s,id:e.map(function(e){return e.id}),size:e.map(function(e){return e.values.length}),extension:{datasetId:"nama_10_gdp",drilldown:f[c].drilldown}}}));var c},window.downloadDataSet=function(e){return d(f[e]).then((r=f[e],function(e){var n=o(r)(e),t=XLSX.utils.book_new();XLSX.utils.book_append_sheet(t,n),XLSX.writeFile(t,"exportedData.xlsx")}));var r},window.getValue=function(i,a){var e=i.id.reduce(function(e,n,t){if(null!=e){e*=i.size[t];var r=a[n];null==r&&(console.log("dim missing: "+n),r=0);var o=i.dimension[n].category.index[r];if(null!==o)return e+=o}},0);return e in i.value?i.value[e]:null},/[?&]simple=simple/.test(window.location.search)&&document.querySelector("html").classList.add("simple")}();
