!function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(c){var t=c.dataSets[0].series,e=c.structure.attributes.observation,u=c.structure.dimensions.observation[0],l=e.map(function(e,t){return[t,e]}).filter(function(e){return"OBS_STATUS"===s(e,2)[1].id})[0],f=c.structure.dimensions.series,d={};Object.keys(t).forEach(function(a){var s=t[a];Object.keys(s.observations).forEach(function(e){var t,n,r=s.observations[e],o=null===r[0],i=(t=r,l?l[1].values[t[l[0]+1]]:{A:"Normal value"});o||-1===v.indexOf(i.id)?(!o&&p&&console.log(c.structure.links[0].href.split("/").slice(-2,-1).concat((n=a.split(":"),f.map(function(e,t){return e.values[n[t]]}).map(function(e){return e.id}))).join("."),"removed ".concat(i.id," (").concat(i.name,")"),u.values[e].name),delete s.observations[e]):d[e]=!0}),0===Object.keys(s.observations).length&&delete t[a]});for(var n=u.values,r=[],o=!1,i=0,a=0;i<n.length;i++)d[i]&&(r.push([i,a]),i!==a&&(o=!0),a++);return u.values=n.filter(function(e,t){return d[t]}),o&&Object.keys(t).forEach(function(e){var o=t[e],i={};r.forEach(function(e){var t=s(e,2),n=t[0],r=t[1];n in o.observations&&(i[r]=o.observations[n])}),o.observations=i}),c}function g(t,e){var n=["lastNObservations","startPeriod"].filter(function(e){return e in t});return e?e+"/"+t.code.replace(".","/")+encodeURIComponent((n.length?"?":"")+n.map(function(e){return"".concat(e,"=").concat(t[e])}).join("&")):"https://sdw-wsrest.ecb.europa.eu/service/data/"+t.code.replace(".","/")+(n.length?"?":"")+n.map(function(e){return"".concat(e,"=").concat(encodeURIComponent(t[e]))}).join("&")}function o(h){return function(t){function c(e){return!h.singleTimePeriod||e.name===o}var e=g(h),n=h.description,u=t.structure.links[0].href.split("/")[6],l=t.structure.dimensions.observation[0].values,f=t.structure.dimensions.series,r=t.structure.attributes.series,o=l.map(function(e){return e.name}).sort().reverse()[0],i="";r.forEach(function(e){!e.values.length||"TITLE_COMPL"!==e.id&&"COMMENT_TS"!==e.id||(i=e.values[0].name)}),i&&(f.forEach(function(e){1<e.values.length&&(i=i.replace(e.values[0].name,""))}),i=(i=(i=i.replace(/- *[,-]/g,"-")).replace(/, *,/g,",")).replace(/^ *, */g,"")),h.methodology&&(i=h.methodology);function a(e){var o=t.dataSets[0].series[e],r=e.split(":"),i=[],a=[u];f.forEach(function(e,t){var n=e.values[r[t]];a.push(n.id),1<e.values.length&&i.push(n.name)}),i.unshift(a.join("."));var s=!1;l.forEach(function(e,t){if(c(e)){var n=o.observations[t],r=void 0!==n?n[0]:null;null!==r&&(s=!0),i.push(r)}}),s&&d.push(i)}var s=["Statistical Data Warehouse code"].concat(f.filter(function(e){return 1<e.values.length}).map(function(e){return e.name})).concat(l.filter(c).map(function(e){return e.name})),d=[s];for(var p in t.dataSets[0].series)a(p);var v=[[n],[i],["URL: ".concat(e)],[]],m=XLSX.utils.aoa_to_sheet(v.concat(d));return m["!merges"]=[{s:{r:0,c:0},e:{r:0,c:10}},{s:{r:1,c:0},e:{r:1,c:10}},{s:{r:2,c:0},e:{r:2,c:10}}],m["!cols"]=s.map(function(e,t){var n=e.length;return d.forEach(function(e){e[t]&&e[t].length>n&&(n=e[t].length)}),{width:n+1}}),m}}function i(e){var t={},n={},c={};return e.forEach(function(s){Object.keys(s.dimension.geo.category.index).forEach(function(e){c.geo=e;var r=t[e],o=n[e];Object.keys(s.dimension.time.category.index).forEach(function(e){c.time=e;var i,a,t,n=(a=c,(t=(i=s).id.reduce(function(e,t,n){if(null!=e){e*=i.size[n];var r=a[t];null==r&&(console.log("dim missing: "+t),r=0);var o=i.dimension[t].category.index[r];if(null!==o)return e+=o}},0))in i.value?i.value[t]:null);null!==n&&((null==r||n<r)&&(r=n),(null==o||o<n)&&(o=n))}),t[e]=r,n[e]=o})}),{min:t,max:n}}var a,p="undefined"!=typeof window&&/debug/.test(window.location.hash),v=["A","P","U"],u={},l=[{code:"ICP.M.AT+BE+CY+DE+EE+ES+FI+FR+GR+IE+IT+LT+LU+LV+MT+NL+PT+SI+SK+U2.N.000000.4.ANR",startPeriod:"2010-01",description:"Indices of consumer prices",methodology:"Annual percentage changes",axisGroup:1},{code:"ICP.M.AT+BE+CY+DE+EE+ES+FI+FR+GR+IE+IT+LT+LU+LV+MT+NL+PT+SI+SK+U2.N.FOOD00.4.ANR",startPeriod:"2010-01",description:"Indices of consumer prices",methodology:"Annual percentage changes",axisGroup:1},{code:"ICP.M.AT+BE+CY+DE+EE+ES+FI+FR+GR+IE+IT+LT+LU+LV+MT+NL+PT+SI+SK+U2.N.NRGY00.4.ANR",startPeriod:"2010-01",description:"Indices of consumer prices",methodology:"Annual percentage changes"},{code:"ICP.M.AT+BE+CY+DE+EE+ES+FI+FR+GR+IE+IT+LT+LU+LV+MT+NL+PT+SI+SK+U2.N.IGXE00.4.ANR",startPeriod:"2010-01",description:"Indices of consumer prices",methodology:"Annual percentage changes",axisGroup:1},{code:"ICP.M.AT+BE+CY+DE+EE+ES+FI+FR+GR+IE+IT+LT+LU+LV+MT+NL+PT+SI+SK+U2.N.SERV00.4.ANR",startPeriod:"2010-01",description:"Indices of consumer prices",methodology:"Annual percentage changes",axisGroup:1}],f=(a="../../data",function(e){var r=g(e,a);return r in u||(u[r]=new Promise(function(e,t){var n=new XMLHttpRequest;n.addEventListener("load",function(){200<=this.status&&this.status<400?e(JSON.parse(this.responseText)):t(this.status+" "+this.statusText)}),n.open("GET",r),n.setRequestHeader("Accept","application/json"),n.send()}).then(function(e){return n(e)})),u[r]});l.map(function(e){return g(e)});window.fetchDataSetWithExtremes=function(r){return Promise.all(l.map(function(e,t){return[e,t]}).filter(function(e){var t=s(e,2),n=t[0];return t[1]===r||null!=n.axisGroup&&n.axisGroup===l[r].axisGroup}).map(function(e){var t=s(e,2),n=t[0],r=t[1];return f(n).then(function(t){var r={REF_AREA:"geo",TIME_PERIOD:"time"},o={U2:"EA",GB:"UK",GR:"EL"},e=t.structure.dimensions.series.concat(t.structure.dimensions.observation),i=e.map(function(e){return e.values.length});i.shift();var n=e.filter(function(e){return 1!=e.values.length}).map(function(e){var t=e.id in r?r[e.id]:e.id,n="geo"===t?e.values.map(function(e){var t=e.id in o?o[e.id]:e.id;return c(c({},e),{},{id:t})}):e.values;return c(c({},e),{},{id:t,values:n})}),a={};Object.keys(t.dataSets[0].series).forEach(function(e){var n=t.dataSets[0].series[e],r=0;e.split(":").forEach(function(e,t){r+=parseInt(e),r*=i[t]}),Object.keys(n.observations).forEach(function(e){var t=n.observations[e][0];a[r+parseInt(e)]=t})});var s={};return n.forEach(function(n){s[n.id]={category:{index:{}}},n.values.forEach(function(e,t){s[n.id].category.index[e.id]=t})}),{class:"dataset",value:a,dimension:s,id:n.map(function(e){return e.id}),size:n.map(function(e){return e.values.length}),extension:{datasetId:"nama_10_gdp"}}}).then(function(e){return[e,r]})})).then(function(e){var t=e.filter(function(e){return s(e,2)[1]===r})[0][0];return t.extension.extremes=i(e.map(function(e){return s(e,1)[0]})),t})},window.downloadDataSet=function(e){return f(l[e]).then((r=l[e],function(e){var t=o(r)(e),n=XLSX.utils.book_new();XLSX.utils.book_append_sheet(n,t),XLSX.writeFile(n,"exportedData.xlsx")}));var r},/[?&]simple=simple/.test(window.location.search)&&document.querySelector("html").classList.add("simple")}();
