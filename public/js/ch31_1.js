!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach((function(t){e(n,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))}))}return n}var r,i=function(e,t){var n=["lastNObservations","startPeriod"].filter((function(t){return t in e}));return t?t+"/"+e.code.replace(".","/")+encodeURIComponent((n.length?"?":"")+n.map((function(t){return"".concat(t,"=").concat(e[t])})).join("&")):"https://sdw-wsrest.ecb.europa.eu/service/data/"+e.code.replace(".","/")+(n.length?"?":"")+n.map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")},a={},s=[{code:"FM.D.U2.EUR.4F.KR.MLFR+DFR+MRR_FR.LEV",startPeriod:"2010-01-01",description:"Financial market statistics - key ECB interest rates (percentage)"}],o=(r="../../data",function(e){var t=i(e,r);return t in a||(a[t]=new Promise((function(e,n){var r=new XMLHttpRequest;r.addEventListener("load",(function(){this.status>=200&&this.status<400?e(JSON.parse(this.responseText)):n(this.status+" "+this.statusText)})),r.open("GET",t),r.setRequestHeader("Accept","application/json"),r.send()}))),a[t]}),u=function(e,t,n){for(var r in e){var i=e[r],a=i.observations[t]||[null],s=i.observations[n]||[null];if(a[0]!==s[0])return!1}return!0},c=function(e,t){return n(n({},e),{},{idx:t})},l=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},f=function(e){return function(t){var n,r=i(e),a=e.description,s=t.structure.links[0].href.split("/")[6],o=t.structure.dimensions.observation[0].values.map(c).sort(l).filter((n=t.dataSets[0].series,function(e,t,r){return!(t>0&&t+1<r.length&&u(n,t-1,t)&&u(n,t,t+1))})),f=t.structure.dimensions.series,d=t.structure.attributes.series,p="";d.forEach((function(e){!e.values.length||"TITLE_COMPL"!==e.id&&"COMMENT_TS"!==e.id||(p=e.values[0].name)})),p&&(f.forEach((function(e){e.values.length>1&&(p=p.replace(e.values[0].name,""))})),p=(p=(p=p.replace(/- *[,-]/g,"-")).replace(/, *,/g,",")).replace(/^ *, */g,""));var v=["Statistical Data Warehouse code"].concat(f.filter((function(e){return e.values.length>1})).map((function(e){return e.name}))).concat(o.map((function(e){return e.name}))),h=[v],m=function(e){var n=t.dataSets[0].series[e],r=e.split(":"),i=[],a=[s];f.forEach((function(e,t){var n=e.values[r[t]];a.push(n.id),e.values.length>1&&i.push(n.name)})),i.unshift(a.join(".")),o.forEach((function(e){var t=n.observations[e.idx];i.push(void 0!==t?t[0]:null)})),h.push(i)};for(var b in t.dataSets[0].series)m(b);var g=[[a],[p],["URL: ".concat(r)],[]],O=XLSX.utils.aoa_to_sheet(g.concat(h));O["!merges"]=[{s:{r:0,c:0},e:{r:0,c:10}},{s:{r:1,c:0},e:{r:1,c:10}},{s:{r:2,c:0},e:{r:2,c:10}}],O["!cols"]=v.map((function(e,t){var n=e.length;return h.forEach((function(e){e[t]&&e[t].length>n&&(n=e[t].length)})),{width:n+1}}));var E=XLSX.utils.book_new();XLSX.utils.book_append_sheet(E,O),XLSX.writeFile(E,"exportedData.xlsx")}};s.map((function(e){return i(e)}));window.fetchDataSet=function(e){return o(s[e]).then((function(e){var t={PROVIDER_FM_ID:"geo",TIME_PERIOD:"time"},r={},i=Object.keys(e.dataSets[0].series),a=e.structure.dimensions.observation[0].values.filter((function(t,n,r){return!n||n+1===r.length||i.some((function(t){var r=e.dataSets[0].series[t].observations,i=(r[n-1]||[null])[0],a=(r[n]||[null])[0],s=(r[n+1]||[null])[0];return i!=a||a!=s}))})),s=e.structure.dimensions.series.concat([n(n({},e.structure.dimensions.observation[0]),{},{values:a})]),o=s.map((function(e){return e.values.length}));o.shift();var u=s.filter((function(e){return 1!=e.values.length})).map((function(e){var i=e.id in t?t[e.id]:e.id,a="geo"===i?e.values.map((function(e){var t=e.id in r?r[e.id]:e.id;return n(n({},e),{},{id:t})})):e.values;return n(n({},e),{},{id:i,values:a})})),c={},l=a.map((function(e){return e.id}));Object.keys(e.dataSets[0].series).forEach((function(t){var n=e.dataSets[0].series[t],r=0;t.split(":").forEach((function(e,t){r+=parseInt(e),r*=o[t]})),Object.keys(n.observations).forEach((function(t){var i=e.structure.dimensions.observation[0].values[t].id,a=l.indexOf(i);if(a>=0){var s=n.observations[t][0];s=parseFloat(s.toFixed(2)),c[r+a]=s}}))}));var f={};return u.forEach((function(e){f[e.id]={category:{index:{}}},e.values.forEach((function(t,n){f[e.id].category.index[t.id]=n}))})),{class:"dataset",value:c,dimension:f,id:u.map((function(e){return e.id})),size:u.map((function(e){return e.values.length})),extension:{datasetId:"nama_10_gdp"}}}))},window.downloadDataSet=function(e){return o(s[e]).then(f(s[e]))},/[?&]simple=simple/.test(window.location.search)&&document.querySelector("html").classList.add("simple")}();
