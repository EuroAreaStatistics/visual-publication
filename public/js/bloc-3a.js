!function(){"use strict";function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function e(c){var e=c.dataSets[0].series,t=c.structure.attributes.observation,u=c.structure.dimensions.observation[0],l=t.map(function(t,e){return[e,t]}).filter(function(t){return"OBS_STATUS"===s(t,2)[1].id})[0],f=c.structure.dimensions.series,d={};Object.keys(e).forEach(function(i){var s=e[i];Object.keys(s.observations).forEach(function(t){var e,n,r=s.observations[t],a=null===r[0],o=(e=r,l?l[1].values[e[l[0]+1]]:{A:"Normal value"});a||-1===v.indexOf(o.id)?(!a&&g&&console.log(c.structure.links[0].href.split("/").slice(-2,-1).concat((n=i.split(":"),f.map(function(t,e){return t.values[n[e]]}).map(function(t){return t.id}))).join("."),"removed ".concat(o.id," (").concat(o.name,")"),u.values[t].name),delete s.observations[t]):d[t]=!0}),0===Object.keys(s.observations).length&&delete e[i]});for(var n=u.values,r=[],a=!1,o=0,i=0;o<n.length;o++)d[o]&&(r.push([o,i]),o!==i&&(a=!0),i++);return u.values=n.filter(function(t,e){return d[e]}),a&&Object.keys(e).forEach(function(t){var a=e[t],o={};r.forEach(function(t){var e=s(t,2),n=e[0],r=e[1];n in a.observations&&(o[r]=a.observations[n])}),a.observations=o}),c}function n(e,t){var n=["lastNObservations","startPeriod"].filter(function(t){return t in e});return t?t+"/"+e.code.replace(".","/")+encodeURIComponent((n.length?"?":"")+n.map(function(t){return"".concat(t,"=").concat(e[t])}).join("&")):"https://sdw-wsrest.ecb.europa.eu/service/data/"+e.code.replace(".","/")+(n.length?"?":"")+n.map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}function c(t){return t.structure.dimensions.observation[0].values.slice(-1)[0].id}function t(i,s){i.html(s.replace(/\[Date 1\]/g,"…").replace(/\[Date 2\]/g,"…")),Promise.all(u.map(l)).then(function(t){var e=t.map(c);e.sort();var n,r,a=(n=e[0],r=n.split("-"),new Date(Date.UTC(r[0],r[1]-1))),o=new Date(a);o.setYear(o.getFullYear()-1),i.html(s.replace(/\[Date 1\]/g,f(a)).replace(/\[Date 2\]/g,f(o)))})}var a,g="undefined"!=typeof window&&/debug/.test(window.location.hash),v=["A","P","U"],o={},u=[{code:"ICP.M.U2.N.000000.4.ANR",lastNObservations:2}],l=(a="data",function(t){var r=n(t,a);return r in o||(o[r]=new Promise(function(t,e){var n=new XMLHttpRequest;n.addEventListener("load",function(){200<=this.status&&this.status<400?t(JSON.parse(this.responseText)):e(this.status+" "+this.statusText)}),n.open("GET",r),n.setRequestHeader("Accept","application/json"),n.send()}).then(function(t){return e(t)})),o[r]}),f=function(t){return"lv"===String.locale?t.getUTCFullYear()+". "+("general.month."+(t.getUTCMonth()+1)).toLocaleString():"lt"===String.locale?t.getUTCFullYear()+" "+("general.month."+(t.getUTCMonth()+1)).toLocaleString():("general.month."+(t.getUTCMonth()+1)).toLocaleString()+" "+t.getUTCFullYear()};u.map(function(t){return n(t)});String.locale=window.defaultLanguage,String.toLocaleString(window.availableLanguages);var i=getParameterValue("lang");if(""!==i&&""!==i)for(var d in window.availableLanguages)d===i&&(String.locale=i);document.documentElement.lang=String.locale,document.title=_("pages.Bloc3a.title"),$('meta[name="description"]').attr("content",_("description")),$('meta[name="author"]').attr("content",_("author")),$('meta[name="keywords"]').attr("content",_("keywords")),$(function(){t($('[data-trans-id="pages.Bloc3a.text"]'),_("pages.Bloc3a.text")),$("[data-trans-id]").each(function(){var t=$(this).attr("data-trans-id");if("pages.Bloc3a.text"!==t){var e=$(this).attr("data-trans-attr");e?$(this).attr(e,_(t)):$(this).html(_(t))}})})}();
